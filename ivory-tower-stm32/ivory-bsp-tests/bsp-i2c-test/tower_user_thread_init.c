/* This file has been autogenerated by Ivory
 * Compiler version  0.1.0.5
 */
#include "tower_user_thread_init.h"

void callback_i2c1_init_thread_init(const int64_t *n_var0)
{
    uint32_t n_r0 = ivory_hw_io_read_u32((uint32_t) 1073887296U);
    
    /* reg modify rcc_apb1enr: setBit rcc_apb1en_i2c1 */
    ivory_hw_io_write_u32((uint32_t) 1073887296U, (uint32_t) (n_r0 | (uint32_t) ((uint32_t) 1U << (uint32_t) 21U)));
    
    uint32_t n_r1 = ivory_hw_io_read_u32((uint32_t) 1073887280U);
    
    /* reg modify rcc_ahb1enr: setBit rcc_ahb1en_gpiob */
    ;
    
    uint32_t n_cse4 = (uint32_t) ((uint32_t) 1U << (uint32_t) 1U);
    
    ivory_hw_io_write_u32((uint32_t) 1073887280U, (uint32_t) (n_r1 | n_cse4));
    
    uint32_t n_r2 = ivory_hw_io_read_u32((uint32_t) 1073873924U);
    
    /* reg modify gpioB->otype: setField gpio_otype_9 */
    ;
    
    uint32_t n_cse12 = (uint32_t) (uint8_t) ((uint8_t) 1U << 0);
    
    ivory_hw_io_write_u32((uint32_t) 1073873924U, (uint32_t) ((uint32_t) (n_r2 & (uint32_t) ~(uint32_t) ((uint32_t) 1U << (uint32_t) 9U)) | (uint32_t) (n_cse12 << (uint32_t) 9U)));
    
    uint32_t n_r3 = ivory_hw_io_read_u32((uint32_t) 1073873932U);
    
    /* reg modify gpioB->pupd: setField gpio_pupd_9 */
    ;
    
    uint32_t n_cse17 = (uint32_t) ~(uint32_t) ((uint32_t) 3U << (uint32_t) 18U);
    
    ivory_hw_io_write_u32((uint32_t) 1073873932U, (uint32_t) ((uint32_t) (n_r3 & n_cse17) | (uint32_t) (0 << (uint32_t) 18U)));
    
    uint32_t n_r4 = ivory_hw_io_read_u32((uint32_t) 1073873956U);
    
    /* reg modify gpioB->afrh: setField gpio_afrh_9 */
    ;
    
    uint32_t n_cse28 = (uint32_t) (uint8_t) ((uint8_t) 4U << 0);
    
    ivory_hw_io_write_u32((uint32_t) 1073873956U, (uint32_t) ((uint32_t) (n_r4 & (uint32_t) ~(uint32_t) ((uint32_t) 15U << (uint32_t) 4U)) | (uint32_t) (n_cse28 << (uint32_t) 4U)));
    
    uint32_t n_r5 = ivory_hw_io_read_u32((uint32_t) 1073873920U);
    
    /* reg modify gpioB->mode: setField gpio_mode_9 */
    ;
    
    uint32_t n_cse35 = (uint32_t) (uint8_t) ((uint8_t) 2U << 0);
    
    ivory_hw_io_write_u32((uint32_t) 1073873920U, (uint32_t) ((uint32_t) (n_cse17 & n_r5) | (uint32_t) (n_cse35 << (uint32_t) 18U)));
    
    uint32_t n_r6 = ivory_hw_io_read_u32((uint32_t) 1073887280U);
    
    /* reg modify rcc_ahb1enr: setBit rcc_ahb1en_gpiob */
    ivory_hw_io_write_u32((uint32_t) 1073887280U, (uint32_t) (n_cse4 | n_r6));
    
    uint32_t n_r7 = ivory_hw_io_read_u32((uint32_t) 1073873924U);
    
    /* reg modify gpioB->otype: setField gpio_otype_8 */
    ivory_hw_io_write_u32((uint32_t) 1073873924U, (uint32_t) ((uint32_t) (n_r7 & (uint32_t) ~(uint32_t) ((uint32_t) 1U << (uint32_t) 8U)) | (uint32_t) (n_cse12 << (uint32_t) 8U)));
    
    uint32_t n_r8 = ivory_hw_io_read_u32((uint32_t) 1073873932U);
    
    /* reg modify gpioB->pupd: setField gpio_pupd_8 */
    ;
    
    uint32_t n_cse48 = (uint32_t) ~(uint32_t) ((uint32_t) 3U << (uint32_t) 16U);
    
    ivory_hw_io_write_u32((uint32_t) 1073873932U, (uint32_t) ((uint32_t) (n_r8 & n_cse48) | (uint32_t) (0 << (uint32_t) 16U)));
    
    uint32_t n_r9 = ivory_hw_io_read_u32((uint32_t) 1073873956U);
    
    /* reg modify gpioB->afrh: setField gpio_afrh_8 */
    ivory_hw_io_write_u32((uint32_t) 1073873956U, (uint32_t) ((uint32_t) (n_r9 & (uint32_t) ~(uint32_t) ((uint32_t) 15U << 0)) | (uint32_t) (n_cse28 << 0)));
    
    uint32_t n_r10 = ivory_hw_io_read_u32((uint32_t) 1073873920U);
    
    /* reg modify gpioB->mode: setField gpio_mode_8 */
    ivory_hw_io_write_u32((uint32_t) 1073873920U, (uint32_t) ((uint32_t) (n_cse48 & n_r10) | (uint32_t) (n_cse35 << (uint32_t) 16U)));
    /* reg set i2c1->cr1:  */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, 0);
    /* reg set i2c1->cr2:  */
    ivory_hw_io_write_u16((uint32_t) 1073763332U, 0);
    /* reg set i2c1->sr1:  */
    ivory_hw_io_write_u16((uint32_t) 1073763348U, 0);
    /* reg set i2c1->sr2:  */
    ivory_hw_io_write_u16((uint32_t) 1073763352U, 0);
    
    uint16_t n_r11 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ;
    
    uint16_t n_cse64 = (uint16_t) ((uint16_t) 1U << (uint16_t) 15U);
    
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_r11 | n_cse64));
    
    uint16_t n_r12 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r12));
    
    uint16_t n_r13 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r13));
    
    uint16_t n_r14 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r14));
    
    uint16_t n_r15 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r15));
    
    uint16_t n_r16 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r16));
    
    uint16_t n_r17 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r17));
    
    uint16_t n_r18 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r18));
    
    uint16_t n_r19 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r19));
    
    uint16_t n_r20 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r20));
    
    uint16_t n_r21 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r21));
    
    uint16_t n_r22 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r22));
    
    uint16_t n_r23 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r23));
    
    uint16_t n_r24 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r24));
    
    uint16_t n_r25 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r25));
    
    uint16_t n_r26 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r26));
    
    uint16_t n_r27 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r27));
    
    uint16_t n_r28 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r28));
    
    uint16_t n_r29 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r29));
    
    uint16_t n_r30 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r30));
    
    uint16_t n_r31 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r31));
    
    uint16_t n_r32 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r32));
    
    uint16_t n_r33 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r33));
    
    uint16_t n_r34 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r34));
    
    uint16_t n_r35 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r35));
    
    uint16_t n_r36 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r36));
    
    uint16_t n_r37 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r37));
    
    uint16_t n_r38 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r38));
    
    uint16_t n_r39 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r39));
    
    uint16_t n_r40 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r40));
    
    uint16_t n_r41 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r41));
    
    uint16_t n_r42 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_cse64 | n_r42));
    
    uint16_t n_r43 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: clearBit i2c_cr1_swrst */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) (n_r43 & (uint16_t) ~n_cse64));
    
    uint16_t n_r44 = ivory_hw_io_read_u16((uint32_t) 1073763332U);
    
    /* reg modify i2c1->cr2: setField i2c_cr2_freq */
    ivory_hw_io_write_u16((uint32_t) 1073763332U, (uint16_t) ((uint16_t) (n_r44 & (uint16_t) ~(uint16_t) ((uint16_t) 63U << 0)) | (uint16_t) ((uint16_t) 42U << 0)));
    
    uint16_t n_r45 = ivory_hw_io_read_u16((uint32_t) 1073763332U);
    
    /* reg modify i2c1->cr2: setBit i2c_cr2_itbufen, setBit i2c_cr2_itevten, setBit i2c_cr2_iterren */
    ivory_hw_io_write_u16((uint32_t) 1073763332U, (uint16_t) ((uint16_t) ((uint16_t) ((uint16_t) ((uint16_t) 1U << (uint16_t) 8U) | (uint16_t) ((uint16_t) 1U << (uint16_t) 9U)) | n_r45) | (uint16_t) ((uint16_t) 1U << (uint16_t) 10U)));
    
    uint16_t n_let47 = (uint16_t) ((bool) ((uint32_t) 4U <= (uint32_t) UINT16_MAX) ? (uint16_t) 4U : 0);
    uint16_t n_let48 = (uint16_t) ((bool) (n_let47 < (uint16_t) 1U) ? (uint16_t) 1U : n_let47);
    uint16_t n_r49 = ivory_hw_io_read_u16((uint32_t) 1073763356U);
    
    /* reg modify i2c1->ccr: setBit i2c_ccr_fastmode, setBit i2c_ccr_duty, setField i2c_ccr_ccr */
    ivory_hw_io_write_u16((uint32_t) 1073763356U, (uint16_t) ((uint16_t) ((uint16_t) ((uint16_t) (n_cse64 | n_r49) | (uint16_t) ((uint16_t) 1U << (uint16_t) 14U)) & (uint16_t) ~(uint16_t) ((uint16_t) 4095U << 0)) | (uint16_t) ((uint16_t) (n_let48 & (uint16_t) 4095U) << 0)));
    
    uint16_t n_r50 = ivory_hw_io_read_u16((uint32_t) 1073763328U);
    
    /* reg modify i2c1->cr1: setBit i2c_cr1_pe */
    ivory_hw_io_write_u16((uint32_t) 1073763328U, (uint16_t) ((uint16_t) ((uint16_t) 1U << 0) | n_r50));
    /* reg set nvic_iser0: setBit nvic_iser_setena.[31] */
    ivory_hw_io_write_u32((uint32_t) 3758153984U, (uint32_t) ((uint32_t) 1U << (uint32_t) 31U));
    /* reg set nvic_iser1: setBit nvic_iser_setena.[0] */
    ivory_hw_io_write_u32((uint32_t) 3758153988U, (uint32_t) ((uint32_t) 1U << 0));
}
