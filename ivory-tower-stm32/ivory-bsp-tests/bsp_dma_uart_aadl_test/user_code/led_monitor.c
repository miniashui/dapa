/* This file has been autogenerated by Ivory
 * Compiler version  0.1.0.5
 */
#include "led_monitor.h"

void callback_hardwareinit(const int64_t *n_var0)
{
    uint32_t n_r0 = ivory_hw_io_read_u32((uint32_t) 1073887280U);
    
    /* reg modify rcc_ahb1enr: setBit rcc_ahb1en_gpiod */
    ivory_hw_io_write_u32((uint32_t) 1073887280U, (uint32_t) (n_r0 | (uint32_t) ((uint32_t) 1U << (uint32_t) 3U)));
    
    uint32_t n_r1 = ivory_hw_io_read_u32((uint32_t) 1073875972U);
    
    /* reg modify gpioD->otype: setField gpio_otype_4 */
    ivory_hw_io_write_u32((uint32_t) 1073875972U, (uint32_t) ((uint32_t) (n_r1 & (uint32_t) ~(uint32_t) ((uint32_t) 1U << (uint32_t) 4U)) | (uint32_t) (0 << (uint32_t) 4U)));
    
    uint32_t n_r2 = ivory_hw_io_read_u32((uint32_t) 1073875976U);
    
    /* reg modify gpioD->ospeed: setField gpio_ospeed_4 */
    ;
    
    uint32_t n_cse12 = (uint32_t) ~(uint32_t) ((uint32_t) 3U << (uint32_t) 8U);
    uint32_t n_cse14 = (uint32_t) (0 << (uint32_t) 8U);
    
    ivory_hw_io_write_u32((uint32_t) 1073875976U, (uint32_t) ((uint32_t) (n_r2 & n_cse12) | n_cse14));
    
    uint32_t n_r3 = ivory_hw_io_read_u32((uint32_t) 1073875980U);
    
    /* reg modify gpioD->pupd: setField gpio_pupd_4 */
    ivory_hw_io_write_u32((uint32_t) 1073875980U, (uint32_t) (n_cse14 | (uint32_t) (n_cse12 & n_r3)));
    
    uint32_t n_r4 = ivory_hw_io_read_u32((uint32_t) 1073875968U);
    
    /* reg modify gpioD->mode: setField gpio_mode_4 */
    ivory_hw_io_write_u32((uint32_t) 1073875968U, (uint32_t) ((uint32_t) (n_cse12 & n_r4) | (uint32_t) ((uint32_t) (uint8_t) ((uint8_t) 3U << 0) << (uint32_t) 8U)));
}

void callback_newoutput(const bool *n_var0)
{
    bool n_deref0 = *n_var0;
    
    if (n_deref0) {
        uint32_t n_r1 = ivory_hw_io_read_u32((uint32_t) 1073875992U);
        
        /* reg modify gpioD->bsrr: setBit gpio_br_4 */
        ;
        ivory_hw_io_write_u32((uint32_t) 1073875992U, (uint32_t) (n_r1 | (uint32_t) ((uint32_t) 1U << (uint32_t) 20U)));
        
        uint32_t n_r2 = ivory_hw_io_read_u32((uint32_t) 1073875968U);
        
        /* reg modify gpioD->mode: setField gpio_mode_4 */
        ;
        ivory_hw_io_write_u32((uint32_t) 1073875968U, (uint32_t) ((uint32_t) (n_r2 & (uint32_t) ~(uint32_t) ((uint32_t) 3U << (uint32_t) 8U)) | (uint32_t) ((uint32_t) (uint8_t) ((uint8_t) 1U << 0) << (uint32_t) 8U)));
    } else {
        uint32_t n_r3 = ivory_hw_io_read_u32((uint32_t) 1073875968U);
        
        /* reg modify gpioD->mode: setField gpio_mode_4 */
        ;
        ivory_hw_io_write_u32((uint32_t) 1073875968U, (uint32_t) ((uint32_t) ((uint32_t) ~(uint32_t) ((uint32_t) 3U << (uint32_t) 8U) & n_r3) | (uint32_t) ((uint32_t) (uint8_t) ((uint8_t) 3U << 0) << (uint32_t) 8U)));
    }
}
